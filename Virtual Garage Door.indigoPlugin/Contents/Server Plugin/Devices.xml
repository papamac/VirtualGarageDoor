<?xml version="1.0"?>
<!--
###############################################################################
#                                                                             #
#                      Virtual Garage Door Indigo Plugin                      #
#                              FILE Devices.xml                               #
#                                                                             #
###############################################################################

  BUNDLE:  Monitoring and control of conventional garage door openers in Indigo
           (Virtual Garage Door.indigoPlugin
    FILE:  Devices.xml
   TITLE:  Define and initialize the Virtual Garage Door device objects
FUNCTION:  Devices.xml defines the structure of the device objects, specifies
           GUI labels, and sets default values.
   USAGE:  Devices.xml is read by the Indigo server during plugin startup.
  AUTHOR:  papamac
 VERSION:  1.5.0
    DATE:  August 4, 2025

CHANGE LOG:

v0.5.0  12/27/2020  Initial beta version.
v0.6.0   2/16/2021  Add fields to name the on/off sensor/actuator states
                    defaulting with the usual "onOffState".  This allows the
                    use of EasyDAQ digital input/output/relay devices that
                    include the channel number in the state name, e.g.,
                    "channel01".
v0.7.0    9/9/2021  Change opener device type to relay for compatibility with
                    the HomeKit Bridge plugin.  Eliminate the numeric door
                    state and change it to a descriptive door status.
v0.9.0   5/31/2022  Add a new monitored device called activationSensor that
                    turns on when the garage door opener is activated.  Keep
                    the openerRelay (formally actuatorRelay) only for use in
                    controlling the door.  Add a field to specify the relay
                    channel number for EasyDAQ relays.
v0.9.2   6/13/2022  Add a new vibration sensor to the monitored devices. Change
                    the opener relay to the activation relay and recognize its
                    role as a sensor device as well as an activation control
                    device.  Replace the full sensor names with two character
                    abbreviated names to simplify the state processing code in
                    plugin.py.
v0.9.3   6/30/2022  Add hidden travel timer fields to the opener device
                    ConfigUI to allow common initialization and validation
                    methods to be used for all monitored devices.  Add hidden
                    xxSelected fields for other monitored device fields to
                    manage ConfigUI visibility for optional devices.
v1.0.1   7/23/2022  Add a new vsResetDelay field to allow the user to set the
                    time available for residual shaking after the door stops.
                    Permit travel time to be a floating point number.
v1.0.6    9/8/2022  Change the default value for the vsResetDelay to 2.0
                    seconds.  Add wiki references in the configUI notes.
v1.1.0  12/18/2022  Add an integer doorState to the device states dictionary to
                    support full integration with Apple HomeKit.  Add a new
                    "reversing" door status to report interrupted (obstructed)
                    closing.
v1.1.1   1/22/2023  Change the default value for the vsResetDelay to an integer
                    value of 2 sec.
v1.3.0   5/23/2024  Add optional closing/opening actions to the opener
                    ConfigUI.
v1.3.2   7/12/2024  Add a new lock device to the plugin.
v1.3.3   7/17/2024  Add priorDoorState to the opener device.
v1.3.4   8/18/2024  (1) Reverse order of opener and lock devices to reverse the
                    order of the presentation in the Home page New dialog.
                    (2) Remove the priorDoorState from the opener device.
v1.3.11 10/11/2024  Remove the "locked" option from the opener device
                    doorStatus state.
v1.4.0   4/20/2025  This is a major release with a number of new capabilities
                    and new ConfigUI's.  Consider it the first beta release of
                    a forthcoming v2.0.  It includes the following changes:
                    (1) Add optional capabilities to unlock before opening a
                    door and lock after closing a door.
                    (2) Add menu fields for lock and timer devices in the
                    opener ConfigUI.
                    (3) Add a menu field for an opener device in the lock
                    ConfigUI.
                    (4) Add optional lock devices and actions to the opener
                    ConfigUI when a lock device is selected from the menu.
v1.5.0    8/4/2025  (1) Replace the opener device STOPPED and REVERSING states
                    with a new OBSTRUCTED state.
                    (2) Change the nomenclature for the VGD lock device to the
                    virtual lock device.  Change lock references from lk and
                    lkDevId to vl and  vlDevId.
                    (3) Add latch sensor (ls) fields to both the opener and
                    virtual lock devices.
                    (4) Add xxSelected and xxDevId hidden fields in the opener
                    device for the vl, ls, ps, and ml.
                    (5) Add the IsLockSubType hidden field to the lock device.
                    (6) Make the ls, ps, and ml fields visible in the opener
                    device ConfigUI only if the virtual lock (vl) is selected.
                    (7) Add "closed-lk" to the doorStatus state list for the
                    opener device.
                    (8) Change the xxState fields to xxStateName fields for all
                    monitored devices.
                    (9) Add the dynamicReload="true" qualifier to all dynamic
                    list definitions.
                    (10) Organize the opener and virtual lock ConfigUI field
                    definitions in groups as described below.
                    (11) Add logging options fields: logDoorStateChanges,
                    logLockStateChanges, and logDoorStateTracks.


###############################################################################
#                                                                             #
#                      Virtual Garage Door Indigo Plugin                      #
#                               Group Overview                                #
#                                                                             #
###############################################################################

The ConfigUI fields are organized into 14 primary groups, one for each of the
devices/action groups that are used by the VGD plugin.  Each group has a
two-character group id ('xx').  Field ids within the group are named
'xxFieldId'.  Common field ids (sans the group id) are used across all groups.

Each group includes an 'xxName' field id that names the device/action group
that is the subject of the group.  This field is filled using a dynamic list
menu that is generated by the getMenuList method.  The filter argument that is
passed to getMenuList contains the group id and the menu type in the form
'xx:menuType'.

The table below lists the group, the group id, the menu type, and the menu
list filter for all 14 primary groups.  Groups 1-13 are included in the opener
device ConfigUI and groups 9-14 are included in the virtual lock device
ConfigUI.  Groups are preceded by a numbered header comment for readability.

               Group         Group      Menu Type       Filter
                              Id

    1.    activation relay    ar       relay           ar:relay
    2.    closed sensor       cs       sensor          cs:sensor
    3.    open sensor         os       sensor          os:sensor
    4.    vibration sensor    vs       sensor          vs:sensor
    5.    travel timer        tt       timer           tt:timer
    6.    virtual lock        vl       virtualLock     vl:virtualLock
    7.    latch sensor        ls       sensor          ls:sensor
    8.    power switch        ps       switch          ps:switch
    9.    mechanical lock     ml       lock            ml:lock
    10.   opening action      oa       action          os:action
    11.   closing action      ca       action          ca:action
    12.   locking action      la       action          la:action
    13:   unlocking action    ua       action          ua:action
    14.   opener              op       opener          op:opener

The following 9 common fields are included in most groups:

          Field Id       Field Type                  Description

    1.   xxSelected      checkbox      Value was selected from the xxName menu
    2.   xxDevId         textfield     Text device id for the xxName device
    3.   xxSpacer        label         Spacer to separate groups
    4.   xxName          menu          Primary device name for the group
    5.   xxLabel         label         Description of the primary device
    6.   xxStateName     textfield     on/off state name for the primary device
    7.   xxStateLabel    label         Description of the on/off state
    8.   xxInvert        checkbox      The on/off state should be inverted
    9.   xxInvertLabel   label         Description of inversion criteria

Some groups also have fields that are unique to that group.
-->

<Devices>

    <!-- ################################################################## -->
    <!-- #                                                                # -->
    <!-- #               Virtual Garage Door Opener Device                # -->
    <!-- #                                                                # -->
    <!-- ################################################################## -->

    <Device id="opener" type="relay"
            subType="kRelayDeviceSubType.GarageController" ui="Opener">
        <Name>Virtual Garage Door Opener</Name>
        <ConfigUI>

            <!-- ################# 'NO SELECTION' Option ################## -->

            <Field id="nsLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignText="left">
                <Label>For menu fields, choose 'NO SELECTION' to remove (deselect) a previously selected item.</Label>
            </Field>

            <!-- ################ Monitored Devices Header ################ -->

            <Field id="monitoredDevicesSeparator" type="separator"> </Field>

            <Field id="monitoredDevicesTitle" type="label" alignText="center">
                <Label>Optional Door Tracking Devices (select at least two)</Label>
            </Field>

            <!-- ################ 1. activation relay (ar) ################ -->

             <Field id="arSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="arDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="arSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="arName" type="menu">
                <Label>Activation Relay                           Device Name:</Label>
                <List class="self" filter="ar:relay" method="getMenuList"
                    dynamicReload="true"/>
                <CallbackMethod>arSelected</CallbackMethod>
            </Field>

            <Field id="arLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select a normally open relay that activates the garage door opener.</Label>
            </Field>

            <Field id="arStateName" type="textfield" defaultValue="onOffState"
                   visibleBindingId="arSelected" visibleBindingValue="true">
                <Label>on/off State Name:</Label>
            </Field>

            <Field id="arStateLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="arSelected" visibleBindingValue="true">
                <Label>For EasyDAQ, use "channelnn".</Label>
            </Field>

            <!-- ################## 2. closed sensor (cs) ################# -->

            <Field id="csSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="csDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="csSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="csName" type="menu">
                <Label>Closed Sensor                             Device Name:</Label>
                <List class="self" filter="cs:sensor" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>csSelected</CallbackMethod>
            </Field>

            <Field id="csLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an on/off sensor that senses when the door is closed.</Label>
            </Field>

            <Field id="csStateName" type="textfield" defaultValue="onOffState"
                    visibleBindingId="csSelected" visibleBindingValue="true">
                <Label>on/off State Name:</Label>
            </Field>

            <Field id="csStateLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="csSelected" visibleBindingValue="true">
                <Label>For EasyDAQ, use "channelnn".</Label>
            </Field>

            <Field id="csInvert" type="checkbox" defaultValue="false"
                   visibleBindingId="csSelected" visibleBindingValue="true">
                <Label>Invert on/off State:</Label>
            </Field>

            <Field id="csInvertLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="csSelected" visibleBindingValue="true">
                <Label>Check if the sensor is "off" when the door is fully closed.</Label>
            </Field>

            <!-- ################## 3. open sensor (os) ################### -->

            <Field id="osSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="osDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="osSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="osName" type="menu">
                <Label>Open Sensor                                Device Name:</Label>
                <List class="self" filter="os:sensor" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>osSelected</CallbackMethod>
            </Field>

            <Field id="osLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an on/off sensor that senses when the door is open.</Label>
            </Field>

            <Field id="osStateName" type="textfield" defaultValue="onOffState"
                   visibleBindingId="osSelected" visibleBindingValue="true">
                <Label>on/off State Name:</Label>
            </Field>

             <Field id="osStateLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="osSelected" visibleBindingValue="true">
                <Label>For EasyDAQ, use "channelnn".</Label>
            </Field>

            <Field id="osInvert" type="checkbox" defaultValue="false"
                   visibleBindingId="osSelected" visibleBindingValue="true">
                <Label>Invert on/off State:</Label>
            </Field>

            <Field id="osInvertLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="osSelected" visibleBindingValue="true">
                <Label>Check if the sensor is "off" when the door is fully open.</Label>
            </Field>

             <!-- ############### 4. vibration sensor (vs) ################ -->

            <Field id="vsSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="vsDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="vsSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="vsName" type="menu">
                <Label>Vibration Sensor                          Device Name:</Label>
                <List class="self" filter="vs:sensor" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>vsSelected</CallbackMethod>
            </Field>

             <Field id="vsLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an on/off sensor that captures a one-time vibration event.</Label>
            </Field>

            <Field id="vsStateName" type="textfield" defaultValue="onOffState"
                   visibleBindingId="vsSelected" visibleBindingValue="true">
                <Label>on/off State Name:</Label>
            </Field>

            <Field id="vsInvert" type="checkbox" defaultValue="false"
                   visibleBindingId="vsSelected" visibleBindingValue="true">
                <Label>Invert on/off State:</Label>
            </Field>

            <Field id="vsInvertLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="vsSelected" visibleBindingValue="true">
                <Label>Check if the sensor is "off" when vibration is detected; uncheck it if not.</Label>
            </Field>

            <Field id="vsResetDelay" type="textfield" defaultValue="2"
                   visibleBindingId="vsSelected" visibleBindingValue="true">
                <Label>Reset Delay (0-4 sec):</Label>
            </Field>

            <Field id="vsResetDelayLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="vsSelected" visibleBindingValue="true">
                <Label>Delay resetting the vs to prevent false vibration events from residual motion after the door stops (see wiki 5.2).</Label>
            </Field>

            <!-- ################## 5. travel timer (tt) ################## -->

            <Field id="ttSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="ttDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="ttStateName" type="textfield"
                   defaultValue="timerStatus.active" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="ttSpacer" type="label">
                <Label> </Label>
            </Field>

             <Field id="ttName" type="menu">
                <Label>Travel Timer                                  Device Name:</Label>
                <List class="self" filter="tt:timer" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>ttSelected</CallbackMethod>
            </Field>

             <Field id="ttLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an existing timer device or 'AUTOMATIC' to automatically create/use a standard timer.</Label>
            </Field>

            <Field id="tTime" type="textfield" defaultValue="12.0"
                   visibleBindingId="ttSelected" visibleBindingValue="true">
                <Label>Travel Time (8-20 sec):</Label>
            </Field>

            <Field id="tTimeLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="ttSelected" visibleBindingValue="true">
                <Label>Specify a time that is slightly longer than the door's nominal open/close travel time (see wiki 5.3).</Label>
            </Field>

            <!-- ############# Optional Locking Devices Header ############ -->

            <Field id="ldSeparator" type="separator"> </Field>

            <Field id="ldTitle" type="label" alignText="center">
                <Label>Optional Locking Devices</Label>
            </Field>

            <!-- ################## 6. virtual lock (vl) ################## -->

            <Field id="vlSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="vlDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="vlStateName" type="textfield"
                   defaultValue="onOffState" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="vlSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="vlName" type="menu">
                <Label>Virtual Lock                                  Device Name:</Label>
                <List class="self" filter="vl:virtualLock" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>vlSelected</CallbackMethod>
            </Field>

            <Field id="vlLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an existing virtual lock device or 'AUTOMATIC' to automatically create/use a standard virtual lock.</Label>
            </Field>

            <!-- ################# 7. latch sensor (ls) ################### -->

            <Field id="lsSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="lsDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="lsSpacer" type="label"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label> </Label>
            </Field>

            <Field id="lsName" type="menu"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Latch Sensor                                Device Name:</Label>
                <List class="self" filter="ls:sensor" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>lsSelected</CallbackMethod>
            </Field>

            <Field id="lsLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Select an on/off sensor that senses when the door latch is connected.</Label>
            </Field>

            <Field id="lsStateName" type="textfield" defaultValue="onOffState"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>on/off State Name:</Label>
            </Field>

             <Field id="lsStateLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>For EasyDAQ, use "channelnn".</Label>
            </Field>

            <Field id="lsInvert" type="checkbox" defaultValue="false"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>Invert on/off State:</Label>
            </Field>

            <Field id="lsInvertLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>Check if the sensor is "off" when the door latch is connected; uncheck if not.</Label>
            </Field>

            <!-- ################## 8. power switch (ps) ################## -->

            <Field id="psDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="psStateName" type="textfield"
                   defaultValue="onOffState" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="psSpacer" type="label"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label> </Label>
            </Field>

            <Field id="psName" type="menu"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Power Switch                               Device Name:</Label>
                <List class="self" filter="ps:switch" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>psSelected</CallbackMethod>
            </Field>

            <Field id="psLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Optionally select a switch device that can physically turn on/off the garage door opener.</Label>
            </Field>

            <!-- ################ 9. mechanical lock (ml) ################# -->

            <Field id="mlDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="mlStateName" type="textfield"
                   defaultValue="onOffState" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="mlSpacer" type="label"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label> </Label>
            </Field>

            <Field id="mlName" type="menu"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Mechanical Lock                          Device Name:</Label>
                <List class="self" filter="ml:lock" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>mlSelected</CallbackMethod>
            </Field>

            <Field id="mlLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Optionally select a lock device that can physically lock the garage door.</Label>
            </Field>

            <!-- ################### Optional Actions ##################### -->

            <Field id="actionsSeparator" type="separator"> </Field>

            <Field id="actionsTitle" type="label" alignText="center">
                <Label>Optional Actions</Label>
            </Field>

            <!-- ################## opening action (oa) ################### -->

            <Field id="oaSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="oaName" type="menu">
                <Label>Opening                          Execute Action Group:</Label>
                <List class="self" filter="oa:action" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>oaSelected</CallbackMethod>
            </Field>

            <Field id="oaDelay" type="textfield" defaultValue="0.0">
                <Label>Delay (0-10 sec):</Label>
            </Field>

            <Field id="unlockBeforeOpening" type="checkbox"
                   defaultValue="false"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Unlock Before Opening:</Label>
            </Field>

            <!-- ################### closing action (ca) ################## -->

            <Field id="caSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="caName" type="menu">
                <Label>Closing                            Execute Action Group:</Label>
                <List class="self" filter="ca:action" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>caSelected</CallbackMethod>
            </Field>

            <Field id="caDelay" type="textfield" defaultValue="0.0">
                <Label>Delay (0-10 sec):</Label>
            </Field>

            <Field id="lockAfterClosing" type="checkbox" defaultValue="false"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Lock After Closing:</Label>
            </Field>

            <!-- ################## locking action (la) ################### -->

            <Field id="laSpacer" type="label"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label> </Label>
            </Field>

            <Field id="laName" type="menu"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Locking                           Execute Action Group:</Label>
                <List class="self" filter="la:action" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>laSelected</CallbackMethod>
            </Field>

            <Field id="laDelay" type="textfield" defaultValue="0.0"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Delay (0-10 sec):</Label>
            </Field>

            <!-- ################# unlocking action (ua) ################## -->

            <Field id="uaSpacer" type="label"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label> </Label>
            </Field>

            <Field id="uaName" type="menu"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Unlocking                        Execute Action Group:</Label>
                <List class="self" filter="ua:action" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>uaSelected</CallbackMethod>
            </Field>

            <Field id="uaDelay" type="textfield" defaultValue="0.0"
                    visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Delay (0-10 sec):</Label>
            </Field>

            <!-- #################### Logging Options ##################### -->

            <Field id="loggingOptionsSeparator" type="separator"> </Field>

            <Field id="loggingOptionsTitle" type="label" alignText="center">
                <Label>Logging Options</Label>
            </Field>

            <Field id="loggingOptionsSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="logDoorStateChanges" type="checkbox"
                   defaultValue="false">
                <Label>Log Door State Changes</Label>
            </Field>

            <Field id="logLockStateChanges" type="checkbox"
                   defaultValue="false"
                   visibleBindingId="vlSelected" visibleBindingValue="true">
                <Label>Log Lock State Changes</Label>
            </Field>

            <Field id="logDoorStateTracks" type="checkbox"
                   defaultValue="false">
                <Label>Log Door State Tracks</Label>
            </Field>

        </ConfigUI>

        <!-- ########################## States ############################ -->

        <States>

            <State id="doorState">
                <ValueType>Integer</ValueType>
                <TriggerLabel>Door State Changed</TriggerLabel>
                <TriggerLabelPrefix>Door State</TriggerLabelPrefix>
                <ControlPageLabel>Door State</ControlPageLabel>
                <ControlPageLabelPrefix>Door State</ControlPageLabelPrefix>
            </State>

            <State id="doorStatus">
                <ValueType>
                    <List>
                        <Option value="open">Open</Option>
                        <Option value="closed">Closed</Option>
                        <Option value="opening">Opening</Option>
                        <Option value="closing">Closing</Option>
                        <Option value="obstructed">Obstructed</Option>
                        <Option value="closed-lk">Closed-Locked</Option>
                    </List>
                </ValueType>
                <TriggerLabel>Door Status</TriggerLabel>
                <TriggerLabelPrefix>Door Status</TriggerLabelPrefix>
                <ControlPageLabel>Door Status</ControlPageLabel>
                <ControlPageLabelPrefix>Door Status</ControlPageLabelPrefix>
            </State>

        </States>

        <UiDisplayStateId>doorStatus</UiDisplayStateId>

    </Device>

    <!-- ################################################################## -->
    <!-- #                                                                # -->
    <!-- #                Virtual Garage Door Lock Device                 # -->
    <!-- #                                                                # -->
    <!-- ################################################################## -->

    <Device id="lock" type="relay" subType="kRelayDeviceSubType.Lock"
            ui="Lock">
        <Name>Virtual Garage Door Lock</Name>
        <ConfigUI>

            <!-- ############### Hidden IsLockSubType Field ############### -->

            <Field id="IsLockSubType" type="checkbox" defaultValue="true"
                   hidden="true">
                <Label> </Label>
            </Field>

            <!-- ################# 'NO SELECTION' Option ################## -->

            <Field id="nsLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignText="left">
                <Label>For menu fields, choose 'NO SELECTION' to remove (deselect) a previously selected item.</Label>
            </Field>

            <!-- ################### opener device (op) ################### -->

            <Field id="opDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="opSeparator" type="separator"> </Field>

            <Field id="opTitle" type="label" alignText="center">
                <Label>Linked Opener Device (required)</Label>
            </Field>

            <Field id="opSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="opName" type="menu">
                <Label>Opener                                         Device Name:</Label>
                <List class="self" filter="op:opener" method="getMenuList"/>
            </Field>

            <Field id="opLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an existing opener device.</Label>
            </Field>

             <!-- ############# Optional Locking Devices Header ############ -->

            <Field id="ldSeparator" type="separator"> </Field>

            <Field id="ldTitle" type="label" alignText="center">
                <Label>Optional Locking Devices</Label>
            </Field>

            <!-- ################# 7. latch sensor (ls) ################### -->

            <Field id="lsSelected" type="checkbox" defaultValue="false"
                   hidden="true">
                <Label> </Label>
            </Field>

            <Field id="lsDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="lsSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="lsName" type="menu">
                <Label>Latch Sensor                                Device Name:</Label>
                <List class="self" filter="ls:sensor" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>lsSelected</CallbackMethod>
            </Field>

            <Field id="lsLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Select an on/off sensor that senses when the door latch is connected.</Label>
            </Field>

            <Field id="lsStateName" type="textfield" defaultValue="onOffState"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>on/off State Name:</Label>
            </Field>

             <Field id="lsStateLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>For EasyDAQ, use "channelnn".</Label>
            </Field>

            <Field id="lsInvert" type="checkbox" defaultValue="false"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>Invert on/off State:</Label>
            </Field>

            <Field id="lsInvertLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true"
                   visibleBindingId="lsSelected" visibleBindingValue="true">
                <Label>Check if the sensor is "off" when the door latch is connected; uncheck if not.</Label>
            </Field>

            <!-- ################## 8. power switch (ps) ################## -->

            <Field id="psDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="psStateName" type="textfield"
                   defaultValue="onOffState" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="psSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="psName" type="menu">
                <Label>Power Switch                               Device Name:</Label>
                <List class="self" filter="ps:switch" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>psSelected</CallbackMethod>
            </Field>

            <Field id="psLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Optionally select a switch device that can physically turn on/off the garage door opener.</Label>
            </Field>

            <!-- ################ 9. mechanical lock (ml) ################# -->

            <Field id="mlDevId" type="textfield" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="mlStateName" type="textfield"
                   defaultValue="onOffState" hidden="true">
                <Label> </Label>
            </Field>

            <Field id="mlSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="mlName" type="menu">
                <Label>Mechanical Lock                          Device Name:</Label>
                <List class="self" filter="ml:lock" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>mlSelected</CallbackMethod>
            </Field>

            <Field id="mlLabel" type="label" fontSize="small"
                   fontColor="darkgray" alignWithControl="true">
                <Label>Optionally select a lock device that can physically lock the garage door.</Label>
            </Field>

             <!-- ########## Optional Locking/Unlocking Actions ########### -->

            <Field id="lockingOptionsSeparator" type="separator"> </Field>

            <Field id="lockingOptionsTitle" type="label" alignText="center">
                <Label>Optional Locking/Unlocking Actions</Label>
            </Field>

            <!-- ################## locking action (la) ################### -->

            <Field id="laSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="laName" type="menu">
                <Label>Locking                           Execute Action Group:</Label>
                <List class="self" filter="la:action" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>laSelected</CallbackMethod>
            </Field>

            <Field id="laDelay" type="textfield" defaultValue="0.0">
                <Label>Delay (0-10 sec):</Label>
            </Field>

            <!-- ################# unlocking action (ua) ################## -->

            <Field id="uaSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="uaName" type="menu">
                <Label>Unlocking                        Execute Action Group:</Label>
                <List class="self" filter="ua:action" method="getMenuList"
                      dynamicReload="true"/>
                <CallbackMethod>uaSelected</CallbackMethod>
            </Field>

            <Field id="uaDelay" type="textfield" defaultValue="0.0">
                <Label>Delay (0-10 sec):</Label>
            </Field>

            <!-- #################### Logging Option ###################### -->

            <Field id="loggingOptionSeparator" type="separator"> </Field>

            <Field id="loggingOptionTitle" type="label" alignText="center">
                <Label>Logging Option</Label>
            </Field>

            <Field id="loggingOptionSpacer" type="label">
                <Label> </Label>
            </Field>

            <Field id="logLockStateChanges" type="checkbox"
                   defaultValue="false">
                <Label>Log Lock State Changes</Label>
            </Field>

        </ConfigUI>

        <!-- ########################## States ############################ -->

        <States>

            <State id="lockStatus">
                <ValueType>
                    <List>
                        <Option value="unlocked">Unlocked</Option>
                        <Option value="locked">Locked</Option>
                    </List>
                </ValueType>

                <TriggerLabel>Lock Status</TriggerLabel>
                <TriggerLabelPrefix>Lock Status</TriggerLabelPrefix>
                <ControlPageLabel>Lock Status</ControlPageLabel>
                <ControlPageLabelPrefix>Lock Status</ControlPageLabelPrefix>
            </State>

        </States>

        <UiDisplayStateId>lockStatus</UiDisplayStateId>

    </Device>

</Devices>
